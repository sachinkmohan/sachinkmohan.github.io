---
import { getCollection } from "astro:content";
import Section from "../components/Section.astro";
import Layout from "../layouts/Layout.astro";
import BlogCard from "../components/BlogCard.astro";

// Get all blog posts and sort by date (newest first)
const posts = (await getCollection("blog")).sort(
  (a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime(),
);
const heading = "Blog";
---

<Layout>
  <Section>
    <h1>{heading}</h1>
    {posts.map((post) => <BlogCard post={post} />)}
  </Section>
</Layout>
